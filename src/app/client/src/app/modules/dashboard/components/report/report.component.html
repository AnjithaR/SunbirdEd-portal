<div class="ui" [appTelemetryImpression]="telemetryImpression">
  <div class="twelve wide column px-0">
    <div class="ui container stackable grid m-0 sb-mid-container-min-height dashboard-body-scroll">
      <div class="twelve wide column sb-sideview-tab-container pt-72 pb-48">
        <ng-container *ngIf="(report$ | async) as currentReport else loading">
          <div *ngIf="noResult">
            <app-no-result [data]="noResultMessage"></app-no-result>
          </div>
          <div *ngIf="!noResult">
            <h2 class="ui small header">
              {{currentReport?.reportMetaData?.title || currentReport?.reportMetaData?.label}}
            </h2>
            <p *ngIf="currentReport?.reportMetaData?.description"
              [innerHTML]="reportService.transformHTML(currentReport.reportMetaData.description)"></p>
            <sui-tabset>
              <div class="ui pointing secondary menu d-flex flex-ai-center">
                <a appTelemetryInteract
                  [telemetryInteractObject]="setTelemetryInteractObject(currentReport.reportMetaData.id)"
                  [telemetryInteractEdata]="setTelemetryInteractEdata('report-graph')" class="item" suiTabHeader="graph"
                  (click)="setDownloadUrl(currentReport.reportMetaData.downloadUrl)">{{resourceService?.frmelmnts?.lbl?.graphs}}</a>
                <a appTelemetryInteract
                  [telemetryInteractObject]="setTelemetryInteractObject(currentReport.reportMetaData.id)"
                  [telemetryInteractEdata]="setTelemetryInteractEdata('report_table_'+table.name)"
                  *ngFor="let table of currentReport.tables" (click)="setDownloadUrl(table.downloadUrl)" class="item"
                  [suiTabHeader]="table.id">{{table?.name}}</a>
                <button appTelemetryInteract
                  [telemetryInteractObject]="setTelemetryInteractObject(currentReport.reportMetaData.id)"
                  [telemetryInteractEdata]="setTelemetryInteractEdata('report-download')" type="button"
                  *ngIf="currentReport?.reportMetaData?.downloadUrl"
                  class="sb-btn sb-btn-tertiary sb-btn-normal ml-auto mr-8" (click)="downloadCSV()"><i class="icon"></i>
                  {{resourceService?.frmelmnts?.lbl?.downloadCsv}}</button>
              </div>

              <div class="ui bottom attached segment p-0 b-0 no-bg my-24" suiTabContent="graph">
                <div class="sb-graph-section p-24 my-24"
                  *ngFor="let chart of currentReport.charts; let i = index; let l = last;">
                  <app-data-chart
                    [telemetryInteractObject]="setTelemetryInteractObject(currentReport.reportMetaData.id)"
                    [chartInfo]="chart"></app-data-chart>
                </div>
                <div class="ui warning message" *ngIf="!currentReport.charts.length">
                  {{resourceService?.frmelmnts?.lbl?.graphNotAvailable}}
                </div>
              </div>
              <ng-container *ngFor="let table of currentReport.tables">
                <div class="ui bottom attached small segment  p-0 b-0 no-bg py-24" [suiTabContent]="table.id">
                  <div *ngIf="table.data">
                    <app-data-table [tableId]="table.id" [headerData]="table.header" [rowsData]="table.data">
                    </app-data-table>
                  </div>
                  <div class="ui warning message" *ngIf="!table.data">
                    {{resourceService?.frmelmnts?.lbl?.tableNotAvailable}}
                  </div>
                </div>
              </ng-container>
            </sui-tabset>
          </div>
        </ng-container>
        <ng-template #loading>
          <div class="nine wide column workspacesegment">
            <app-loader></app-loader>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>